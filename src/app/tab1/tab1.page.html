<ion-header no-border>
   
  <ion-toolbar color="bar">
    <ion-title>Psicología</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="salir()">
          <ion-icon slot="icon-only" name="exit"></ion-icon>
      </ion-button>   
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content padding slots="fixed">
  <h3>{{viewTitle}}</h3>
  <ion-card mode="ios">
    <ion-card-header (click)="collapseCard = !collapseCard">
      <ion-card-title>Cita Nueva</ion-card-title>
    </ion-card-header>
    <ion-card-content *ngIf="!collapseCard">
      <ion-item>
        <ion-input type="text" 
                   placeholder="Título" 
                   [(ngModel)]="event.title">
        </ion-input>
      </ion-item>
      <ion-item>
          <ion-input type="text" 
                     placeholder="Descripción"
                     [(ngModel)]="event.desc">
          </ion-input>
      </ion-item>
      <ion-item>
          <ion-select placeholder="Paciente" 
                      okText="Seleccionar"
                      cancelText="Atrás"
                      [(ngModel)]="event.paciente">
              <ion-select-option  
                                  *ngFor="let p of nombresPacientes">
                {{p}}
              </ion-select-option>
          </ion-select>
      </ion-item>
      <ion-item>
          <ion-label>Inició</ion-label>
          <ion-datetime displayFormat="MM/DD/YYYY HH:mm"
                        pickerFormat="MMM D:HH:mm" 
                        [(ngModel)]="event.startTime" 
                        [min]="minDate" >
          </ion-datetime>
      </ion-item>
      <ion-item>
          <ion-label>Fin</ion-label>
          <ion-datetime displayFormat="MM/DD/YYYY HH:mm"
                        pickerFormat="MMM D:HH:mm" 
                        [(ngModel)]="event.endTime" 
                        [min]="minDate" >
          </ion-datetime>
      </ion-item>
      <ion-item>
          <ion-label>Todo el día</ion-label>
          <ion-checkbox [(ngModel)]="event.allDay"></ion-checkbox>
      </ion-item>
      <ion-button  fill="outline"
                   expand="block"
                   [disabled]="event.title == ''"
                  (click)="addCita()">
        Crear Cita
      </ion-button>
    </ion-card-content>
  </ion-card>

  <ion-row>
    <ion-col size="4">
      <ion-button expand="block"
                  [color]="calendar.mode == 'month' ? 'bar' : 'bar-secondary'" 
                  (click)="changeMode('month')">
        Mes
      </ion-button>
    </ion-col>
    <ion-col size="4">
        <ion-button expand="block"
                    [color]="calendar.mode == 'week' ? 'bar' : 'bar-secondary'" 
                    (click)="changeMode('week')">
        Semana
        </ion-button>
    </ion-col>
    <ion-col size="4">
        <ion-button expand="block"
                    [color]="calendar.mode == 'day' ? 'bar' : 'bar-secondary'" 
                    (click)="changeMode('day')">
                    
        Día
        </ion-button>
    </ion-col>
  </ion-row>


  <calendar [eventSource]="eventSource"
          [calendarMode]="calendar.mode"
          [currentDate]="calendar.currentDate"
          (onCurrentDateChanged)="onCurrentDateChanged($event)"
          (onEventSelected)="onEventSelected($event)"
          (onTitleChanged)="onViewTitleChanged($event)"
          (onTimeSelected)="onTimeSelected($event)"
          startHour="7"
          enHour="20"
          step="30"
          startingDayWeek="1"
          >
  </calendar>
</ion-content>
